<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hybrid AI Tester</title>
    <link rel="stylesheet" href="style.css">
    <script type="module" src="main.mjs"></script>
</head>
<body>
    <div id="config">
        <h1>Model Setup</h1>
        <div id="api-used">N/A</div>
        <div>
            <label for="force-fallback">
                <input type="checkbox" id="force-fallback"> Force Fallback API
            </label>
        </div>
        <div>
             <label for="stream-response">
                 <input type="checkbox" id="stream-response" checked> Stream Response
             </label>
        </div>
        <div class="param-group">
            <label for="temperature">Temperature:</label>
            <input type="range" id="temperature" name="temperature" min="0" max="2.0" step="0.1" value="1.0">
            <span id="temperature-value">0.7</span>
        </div>
        <div class="param-group">
            <label for="top-k">Top K:</label>
            <input type="range" id="top-k" name="topK" min="1" max="8" step="1" value="3">
            <span id="top-k-value">3</span>
        </div>
        <div>
            <h4>Instructions for enabling Built-in AI</h4>
            <ul>
                <li>Use Chrome Canary</li>
                <li>Enable the flags:
                    <ul>
                        <li><code>#optimization-guide-on-device-model</code></li>
                        <li><code>#prompt-api-for-gemini-nano-multimodal-input</code></li>
                    </ul>
                </li>
                <li>Restart Chrome</li>
            </ul>
            <div><strong>Note:</strong>Initial prompts are currently crashing Chrome Canary</div>
        </div>
        <button id="reset-settings-button" class="secondary-btn">Reset Settings</button>
    </div>

    <div id="chat-area">
        <div id="system-prompt-wrapper">
             <label id="system-prompt-toggle" for="system-prompt">System Prompt:</label>
             <div id="system-prompt-content">
                <textarea id="system-prompt" placeholder="Enter system instructions..."></textarea>
             </div>
        </div>
        <div id="initial-prompts-wrapper">
             <label id="initial-prompts-toggle">Initial Prompts</label>
             <div id="initial-prompts-content">
                 <div id="initial-prompts-list"></div>
                 <button id="add-initial-prompt">Add Initial Prompt</button>
             </div>
        </div>
        <div id="history-container"></div>
        <div id="input-area">
            <textarea id="user-prompt" placeholder="Enter your prompt..." required rows="1"></textarea>
            <button id="send-prompt">Send</button>
            <button id="clear-history-button" class="secondary-btn" title="Clear Chat History">Clear</button>
        </div>
    </div>

</body>
</html>
